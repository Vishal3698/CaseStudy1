{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/vishalpatel1266/case-study-1-annual-members-vs-casual-members?scriptVersionId=130895468\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"markdown","id":"5ab7c12c","metadata":{"_cell_guid":"00342360-fb97-4316-939a-2aeb40faed6f","_execution_state":"idle","_uuid":"9affb394-5606-4209-903e-90d1d1baf5fe","papermill":{"duration":0.014052,"end_time":"2023-05-24T21:55:13.261504","exception":false,"start_time":"2023-05-24T21:55:13.247452","status":"completed"},"tags":[]},"source":["# Which membership tier will be more profitable?"]},{"cell_type":"markdown","id":"8c9f9d0b","metadata":{"_cell_guid":"dd49396a-3b0a-4f35-b6f0-43a4af9255f5","_uuid":"e15ebf9c-a889-45df-807c-c8a0850b2ead","papermill":{"duration":0.012036,"end_time":"2023-05-24T21:55:13.285959","exception":false,"start_time":"2023-05-24T21:55:13.273923","status":"completed"},"tags":[]},"source":["### About the company\n","\n","In 2016, Cyclistic launched a successful bike-share offering. Since then, the program has grown to a fleet of 5,824 bicycles that are geotracked and locked into a network of 692 stations across Chicago. The bikes can be unlocked from one station and returned to any other station in the system anytime.\n","\n","Until now, Cyclistic’s marketing strategy relied on building general awareness and appealing to broad consumer segments. One approach that helped make these things possible was the flexibility of its pricing plans: single-ride passes, full-day passes, and annual memberships. Customers who purchase single-ride or full-day passes are referred to as casual riders. Customers who purchase annual memberships are Cyclistic members.\n","\n","Cyclistic’s finance analysts have concluded that annual members are much more profitable than casual riders. Although the pricing flexibility helps Cyclistic attract more customers, Moreno believes that maximizing the number of annual members will be key to future growth. Rather than creating a marketing campaign that targets all-new customers, Moreno believes there is a very good chance to convert casual riders into members. She notes that casual riders are already aware of the Cyclistic program and have chosen Cyclistic for their mobility needs.\n","\n","Business has set a clear goal: Design marketing strategies aimed at converting casual riders into annual members. In order to do that, however, the marketing analyst team needs to better understand how annual members and casual riders differ, why casual riders would buy a membership, and how digital media could affect their marketing tactics. Moreno and her team are interested in analyzing the Cyclistic historical bike trip data to identify trends."]},{"cell_type":"markdown","id":"51bd153b","metadata":{"_cell_guid":"bb68deed-9fb0-4e20-8667-3c4d264a9c04","_uuid":"c5b70632-31c3-4452-b969-4ca2bfc1cc53","papermill":{"duration":0.014079,"end_time":"2023-05-24T21:55:13.312164","exception":false,"start_time":"2023-05-24T21:55:13.298085","status":"completed"},"tags":[]},"source":["## Buisness Tasks:\n","- How do annual members and casual riders use Cyclistic bikes differently?Why would casual riders buy Cyclistic annual memberships?\n","- How can Cyclistic use digital media to influence casual riders to become members?\n","- Why would casual riders buy Cyclistic annual memberships?"]},{"cell_type":"markdown","id":"96fb2d45","metadata":{"_cell_guid":"8af60039-f499-44ba-9348-494cf81a753c","_uuid":"8f579467-01fe-4020-a4cd-1daae9bedbb8","papermill":{"duration":0.012561,"end_time":"2023-05-24T21:55:13.336962","exception":false,"start_time":"2023-05-24T21:55:13.324401","status":"completed"},"tags":[]},"source":["### About the Dataset:\n","- The dataset consists of 12 files which conisits ride history data of each month  \n","- The data has been made available by Motivate International Inc. under this [license](https://ride.divvybikes.com/data-license-agreement)\n","- The Divvy system data is owned by the City (“Data”) available to the public, thus it is trustable and has integrity \n","- Data has been improved every time a data analyst makes recommendations after using it to run analysis"]},{"cell_type":"markdown","id":"ffbd49cf","metadata":{"_cell_guid":"b6fa0735-2752-4f33-a546-e60976ae27f2","_uuid":"70f469ce-8d7a-41e4-9188-ff2a8e0bc025","papermill":{"duration":0.01199,"end_time":"2023-05-24T21:55:13.360998","exception":false,"start_time":"2023-05-24T21:55:13.349008","status":"completed"},"tags":[]},"source":["## Processing Data:\n","\n","\n","\n","### 1. Installing and loading the required libraries"]},{"cell_type":"code","execution_count":1,"id":"ecedf271","metadata":{"_cell_guid":"07d0f59c-edaf-437d-bd1f-9d6c34c68f70","_uuid":"2a18fefd-3861-4e71-b930-de67542dac2c","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:55:13.391272Z","iopub.status.busy":"2023-05-24T21:55:13.388575Z","iopub.status.idle":"2023-05-24T21:58:04.437017Z","shell.execute_reply":"2023-05-24T21:58:04.43477Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":171.066842,"end_time":"2023-05-24T21:58:04.439898","exception":false,"start_time":"2023-05-24T21:55:13.373056","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","also installing the dependencies ‘pillar’, ‘rlang’, ‘tibble’, ‘vctrs’\n","\n","\n","Warning message in install.packages(\"dplyr\"):\n","“installation of package ‘rlang’ had non-zero exit status”\n","Warning message in install.packages(\"dplyr\"):\n","“installation of package ‘vctrs’ had non-zero exit status”\n","Warning message in install.packages(\"dplyr\"):\n","“installation of package ‘pillar’ had non-zero exit status”\n","Warning message in install.packages(\"dplyr\"):\n","“installation of package ‘tibble’ had non-zero exit status”\n","Warning message in install.packages(\"dplyr\"):\n","“installation of package ‘dplyr’ had non-zero exit status”\n","Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","also installing the dependency ‘rlang’\n","\n","\n","Warning message in install.packages(\"ggplot2\"):\n","“installation of package ‘rlang’ had non-zero exit status”\n","Warning message in install.packages(\"ggplot2\"):\n","“installation of package ‘ggplot2’ had non-zero exit status”\n"]}],"source":["# Installing packages\n","install.packages(\"tidyverse\")\n","install.packages(\"lubridate\")\n","install.packages(\"dplyr\")\n","install.packages(\"readr\")\n","install.packages(\"ggplot2\")"]},{"cell_type":"code","execution_count":2,"id":"612a122f","metadata":{"_cell_guid":"00117a40-e998-422b-ada0-35b5de997cbc","_uuid":"c06a8b4c-9704-48ef-b2be-fe96f3d10d94","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:04.521819Z","iopub.status.busy":"2023-05-24T21:58:04.473686Z","iopub.status.idle":"2023-05-24T21:58:22.492343Z","shell.execute_reply":"2023-05-24T21:58:22.490188Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":18.03738,"end_time":"2023-05-24T21:58:22.494915","exception":false,"start_time":"2023-05-24T21:58:04.457535","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["Installing package into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","also installing the dependency ‘rlang’\n","\n","\n","Warning message in install.packages(\"ggplot2\"):\n","“installation of package ‘rlang’ had non-zero exit status”\n","Warning message in install.packages(\"ggplot2\"):\n","“installation of package ‘ggplot2’ had non-zero exit status”\n"]}],"source":["install.packages(\"ggplot2\")"]},{"cell_type":"code","execution_count":3,"id":"ac2019a8","metadata":{"_cell_guid":"13ffd1b3-f45f-479b-a1b5-c2dc2e8df0bb","_uuid":"bb1fc5be-a76d-4d8d-bc16-3c4ac5cd7c17","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:22.527098Z","iopub.status.busy":"2023-05-24T21:58:22.525427Z","iopub.status.idle":"2023-05-24T21:58:23.231696Z","shell.execute_reply":"2023-05-24T21:58:23.229693Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.72516,"end_time":"2023-05-24T21:58:23.234427","exception":false,"start_time":"2023-05-24T21:58:22.509267","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["── \u001b[1mAttaching core tidyverse packages\u001b[22m ──────────────────────── tidyverse 2.0.0 ──\n","\u001b[32m✔\u001b[39m \u001b[34mdplyr    \u001b[39m 1.1.0     \u001b[32m✔\u001b[39m \u001b[34mreadr    \u001b[39m 2.1.4\n","\u001b[32m✔\u001b[39m \u001b[34mforcats  \u001b[39m 1.0.0     \u001b[32m✔\u001b[39m \u001b[34mstringr  \u001b[39m 1.5.0\n","\u001b[32m✔\u001b[39m \u001b[34mggplot2  \u001b[39m 3.4.1     \u001b[32m✔\u001b[39m \u001b[34mtibble   \u001b[39m 3.1.8\n","\u001b[32m✔\u001b[39m \u001b[34mlubridate\u001b[39m 1.9.2     \u001b[32m✔\u001b[39m \u001b[34mtidyr    \u001b[39m 1.3.0\n","\u001b[32m✔\u001b[39m \u001b[34mpurrr    \u001b[39m 1.0.1     \n","── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n","\u001b[36mℹ\u001b[39m Use the conflicted package (\u001b[3m\u001b[34m<http://conflicted.r-lib.org/>\u001b[39m\u001b[23m) to force all conflicts to become errors\n"]}],"source":["#Loading packages\n","library(tidyverse)\n","library(lubridate)\n","library(ggplot2)\n","library(dplyr)\n","library(readr)"]},{"cell_type":"markdown","id":"a65cf967","metadata":{"_cell_guid":"f2557c0d-749f-4353-b2b6-729baf387a92","_uuid":"780476c7-07ab-435e-a70a-4324dec9a957","papermill":{"duration":0.014267,"end_time":"2023-05-24T21:58:23.262569","exception":false,"start_time":"2023-05-24T21:58:23.248302","status":"completed"},"tags":[]},"source":["### 2. Loading all the data"]},{"cell_type":"code","execution_count":4,"id":"de338f5d","metadata":{"_cell_guid":"0ca6c1e1-cfb3-40c5-8ab1-3b6cece40f61","_uuid":"8db6c7f3-ac76-4275-a248-915a8b4ad706","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:23.295012Z","iopub.status.busy":"2023-05-24T21:58:23.292817Z","iopub.status.idle":"2023-05-24T21:58:23.308668Z","shell.execute_reply":"2023-05-24T21:58:23.306709Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.034882,"end_time":"2023-05-24T21:58:23.311473","exception":false,"start_time":"2023-05-24T21:58:23.276591","status":"completed"},"tags":[]},"outputs":[],"source":["# Creating a list of filenames so that they can be loaded all at once\n","file_names <- c(\"202205-divvy-tripdata.csv\", \"202206-divvy-tripdata.csv\", \"202207-divvy-tripdata.csv\", \"202208-divvy-tripdata.csv\", \n","                \"202209-divvy-tripdata.csv\", \"202210-divvy-tripdata.csv\", \"202211-divvy-tripdata.csv\", \"202212-divvy-tripdata.csv\",\n","                \"202301-divvy-tripdata.csv\", \"202302-divvy-tripdata.csv\", \"202303-divvy-tripdata.csv\", \"202304-divvy-tripdata.csv\")"]},{"cell_type":"code","execution_count":5,"id":"7b06be16","metadata":{"_cell_guid":"9ae7343f-1ddd-406e-93b4-edac86368d0b","_kg_hide-output":true,"_uuid":"fd1fd4cb-3254-48e3-b1f2-7a77e13d7703","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:23.343409Z","iopub.status.busy":"2023-05-24T21:58:23.341697Z","iopub.status.idle":"2023-05-24T21:58:23.372384Z","shell.execute_reply":"2023-05-24T21:58:23.369744Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.049584,"end_time":"2023-05-24T21:58:23.375011","exception":false,"start_time":"2023-05-24T21:58:23.325427","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'202205-divvy-tripdata.csv'</li><li>'202206-divvy-tripdata.csv'</li><li>'202207-divvy-tripdata.csv'</li><li>'202208-divvy-tripdata.csv'</li><li>'202209-divvy-tripdata.csv'</li><li>'202210-divvy-tripdata.csv'</li><li>'202211-divvy-tripdata.csv'</li><li>'202212-divvy-tripdata.csv'</li><li>'202301-divvy-tripdata.csv'</li><li>'202302-divvy-tripdata.csv'</li><li>'202303-divvy-tripdata.csv'</li><li>'202304-divvy-tripdata.csv'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item '202205-divvy-tripdata.csv'\n","\\item '202206-divvy-tripdata.csv'\n","\\item '202207-divvy-tripdata.csv'\n","\\item '202208-divvy-tripdata.csv'\n","\\item '202209-divvy-tripdata.csv'\n","\\item '202210-divvy-tripdata.csv'\n","\\item '202211-divvy-tripdata.csv'\n","\\item '202212-divvy-tripdata.csv'\n","\\item '202301-divvy-tripdata.csv'\n","\\item '202302-divvy-tripdata.csv'\n","\\item '202303-divvy-tripdata.csv'\n","\\item '202304-divvy-tripdata.csv'\n","\\end{enumerate*}\n"],"text/markdown":["1. '202205-divvy-tripdata.csv'\n","2. '202206-divvy-tripdata.csv'\n","3. '202207-divvy-tripdata.csv'\n","4. '202208-divvy-tripdata.csv'\n","5. '202209-divvy-tripdata.csv'\n","6. '202210-divvy-tripdata.csv'\n","7. '202211-divvy-tripdata.csv'\n","8. '202212-divvy-tripdata.csv'\n","9. '202301-divvy-tripdata.csv'\n","10. '202302-divvy-tripdata.csv'\n","11. '202303-divvy-tripdata.csv'\n","12. '202304-divvy-tripdata.csv'\n","\n","\n"],"text/plain":[" [1] \"202205-divvy-tripdata.csv\" \"202206-divvy-tripdata.csv\"\n"," [3] \"202207-divvy-tripdata.csv\" \"202208-divvy-tripdata.csv\"\n"," [5] \"202209-divvy-tripdata.csv\" \"202210-divvy-tripdata.csv\"\n"," [7] \"202211-divvy-tripdata.csv\" \"202212-divvy-tripdata.csv\"\n"," [9] \"202301-divvy-tripdata.csv\" \"202302-divvy-tripdata.csv\"\n","[11] \"202303-divvy-tripdata.csv\" \"202304-divvy-tripdata.csv\""]},"metadata":{},"output_type":"display_data"}],"source":["# Setting working directory\n","setwd(\"/kaggle/input/bikeshare-membership-trends\")\n","list.files()"]},{"cell_type":"code","execution_count":6,"id":"4c90615d","metadata":{"_cell_guid":"e3ddc875-8a9b-4761-b092-c0f7efd9bbe9","_uuid":"2db80504-793f-4d87-a190-453ff471823d","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:23.407664Z","iopub.status.busy":"2023-05-24T21:58:23.405869Z","iopub.status.idle":"2023-05-24T21:58:23.426538Z","shell.execute_reply":"2023-05-24T21:58:23.424493Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.040018,"end_time":"2023-05-24T21:58:23.429412","exception":false,"start_time":"2023-05-24T21:58:23.389394","status":"completed"},"tags":[]},"outputs":[],"source":["# Create an empty list to store the data frames for each month\n","fileNames_list <- list()\n","\n","# Initialize the df_names vector\n","df_names <- character(length(file_names))\n","\n","# Initialize the vector to store filenames if they have rows with missing values in every column\n","filenames_with_missing_rows <- character(0)"]},{"cell_type":"code","execution_count":7,"id":"b4f3e55c","metadata":{"_cell_guid":"c89c313c-f5c4-4be8-8429-5bd1dfecc926","_uuid":"9ce5ebb5-4dd8-44a7-833b-fc1f49b12160","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:58:23.461979Z","iopub.status.busy":"2023-05-24T21:58:23.460283Z","iopub.status.idle":"2023-05-24T21:59:17.806046Z","shell.execute_reply":"2023-05-24T21:59:17.803722Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":54.366164,"end_time":"2023-05-24T21:59:17.809957","exception":false,"start_time":"2023-05-24T21:58:23.443793","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m634858\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202205-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m769204\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202206-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m823488\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202207-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m785932\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202208-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m701339\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202209-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m558685\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202210-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m337735\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202211-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m181806\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202212-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m190301\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202301-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m190445\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202302-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m258678\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202303-divvy-tripdata.csv : 0 \n"]},{"name":"stderr","output_type":"stream","text":["\u001b[1mRows: \u001b[22m\u001b[34m426590\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m13\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (7): ride_id, rideable_type, start_station_name, start_station_id, end_...\n","\u001b[32mdbl\u001b[39m  (4): start_lat, start_lng, end_lat, end_lng\n","\u001b[34mdttm\u001b[39m (2): started_at, ended_at\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]},{"name":"stdout","output_type":"stream","text":["Rows with missing values in all columns in 202304-divvy-tripdata.csv : 0 \n"]}],"source":["# Loop through each file and load the .csv files\n","\n","for (i in seq_along(file_names)) {\n","  \n","  # Read the CSV file and assign it to a data frame\n","  df_names[i] <- paste0(\"m\", sprintf(\"%02d\", 13 - i), \"_\", gsub(\"-\", \"_\", substr(file_names[i], 3, 8)))\n","  fileNames_list[[df_names[i]]] <- read_csv(file_names[i])\n","  \n","  # Count the number of rows with missing values in all columns\n","  missing_rows_count <- sum(apply(is.na(fileNames_list[[df_names[i]]]), 1, all))\n","  \n","  # Print the result\n","  cat(\"Rows with missing values in all columns in\", file_names[i], \":\", missing_rows_count, \"\\n\")\n","  \n","  # Check if missing_rows_count is greater than 0\n","  if (missing_rows_count > 0) {\n","    filenames_with_missing_rows <- c(filenames_with_missing_rows, file_names[i])\n","  }\n","}"]},{"cell_type":"markdown","id":"44b26400","metadata":{"_cell_guid":"6b910315-d3b1-46fe-a00f-5de29bfa12c6","_uuid":"f032f4a5-fc1e-45f4-8f13-8a0bf20f20ec","papermill":{"duration":0.018272,"end_time":"2023-05-24T21:59:17.84842","exception":false,"start_time":"2023-05-24T21:59:17.830148","status":"completed"},"tags":[]},"source":["### 3. Combining all data into one data frame"]},{"cell_type":"code","execution_count":8,"id":"479badfe","metadata":{"_cell_guid":"2f630f2f-0aef-40d4-a14f-99ff2242a28e","_uuid":"3f125d71-a470-4ae4-a855-cb5cdfc22d81","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:17.889828Z","iopub.status.busy":"2023-05-24T21:59:17.887451Z","iopub.status.idle":"2023-05-24T21:59:17.923293Z","shell.execute_reply":"2023-05-24T21:59:17.92047Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.05929,"end_time":"2023-05-24T21:59:17.926086","exception":false,"start_time":"2023-05-24T21:59:17.866796","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Dataframe: m12_2205_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","Dataframe: m11_2206_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m10_2207_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m09_2208_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m08_2209_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m07_2210_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m06_2211_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m05_2212_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m04_2301_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m03_2302_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m02_2303_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n","Dataframe: m01_2304_d \n","Column Names: ride_id rideable_type started_at ended_at start_station_name start_station_id end_station_name end_station_id start_lat start_lng end_lat end_lng member_casual \n","\n"," \n"," Column names do match with the first dataframe.\n","\n","\n"]}],"source":["# Checking if column names are same in all files before combining the data\n","\n","for (i in seq_along(fileNames_list)) {\n"," \n","  # Get the dataframe name\n","  df_name <- names(fileNames_list)[i]\n","  \n","  # Print the dataframe name\n","  cat(\"Dataframe:\", df_name, \"\\n\")\n","  \n","  # Print the column names\n","  cat(\"Column Names:\", colnames(fileNames_list[[df_name]]), \"\\n\")\n","  \n","  # Check if column names match with the first dataframe\n","  if (i > 1) {\n","    if (!identical(colnames(fileNames_list[[df_name]]), colnames(fileNames_list[[1]]))) {\n","      cat(\"Column names do not match with the first dataframe.\\n\")\n","    } else{\n","      cat(\"\\n \\n Column names do match with the first dataframe.\\n\\n\\n\")\n","    }\n","  }\n","}"]},{"cell_type":"code","execution_count":9,"id":"b7760f6b","metadata":{"_cell_guid":"9e4e9387-b03e-4e8a-9863-ffaf67106da3","_uuid":"6a88ca2c-ab84-4969-b142-578e1a40159b","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:17.970216Z","iopub.status.busy":"2023-05-24T21:59:17.968244Z","iopub.status.idle":"2023-05-24T21:59:21.553445Z","shell.execute_reply":"2023-05-24T21:59:21.551497Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":3.60964,"end_time":"2023-05-24T21:59:21.556046","exception":false,"start_time":"2023-05-24T21:59:17.946406","status":"completed"},"tags":[]},"outputs":[],"source":["# Check was successful, now combining all files into one\n","\n","all_trips_last_year <- bind_rows(fileNames_list)"]},{"cell_type":"code","execution_count":10,"id":"0a59ae8d","metadata":{"_cell_guid":"414cf6f0-8287-4b82-a24b-c7cbde77b53f","_uuid":"dec0cd04-e5eb-40e6-a9ea-00d37ec98ea1","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:21.597241Z","iopub.status.busy":"2023-05-24T21:59:21.595628Z","iopub.status.idle":"2023-05-24T21:59:24.395533Z","shell.execute_reply":"2023-05-24T21:59:24.393102Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":2.823055,"end_time":"2023-05-24T21:59:24.398022","exception":false,"start_time":"2023-05-24T21:59:21.574967","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Column: ride_id \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: rideable_type \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: started_at \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: ended_at \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: start_station_name \n","Number of null values: 832009 \n","Percentage of null values: 14.20038 %\n","\n","Column: start_station_id \n","Number of null values: 832141 \n","Percentage of null values: 14.20263 %\n","\n","Column: end_station_name \n","Number of null values: 889661 \n","Percentage of null values: 15.18436 %\n","\n","Column: end_station_id \n","Number of null values: 889802 \n","Percentage of null values: 15.18677 %\n","\n","Column: start_lat \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: start_lng \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n","Column: end_lat \n","Number of null values: 5973 \n","Percentage of null values: 0.1019447 %\n","\n","Column: end_lng \n","Number of null values: 5973 \n","Percentage of null values: 0.1019447 %\n","\n","Column: member_casual \n","Number of null values: 0 \n","Percentage of null values: 0 %\n","\n"]}],"source":["# Calculate the number of null values in each column\n","null_counts <- colSums(is.na(all_trips_last_year))\n","\n","# Calculate the percentage of null values in each column\n","null_percentages <- (null_counts / nrow(all_trips_last_year)) * 100\n","\n","# Print the number and percentage of null values for each column\n","for (i in seq_along(null_counts)) {\n","  cat(\"Column:\", names(null_counts)[i], \"\\n\")\n","  cat(\"Number of null values:\", null_counts[i], \"\\n\")\n","  cat(\"Percentage of null values:\", null_percentages[i], \"%\\n\\n\")\n","}"]},{"cell_type":"markdown","id":"b21adeab","metadata":{"_cell_guid":"2b6395c1-2acb-42e8-a6b9-e3f2fd22355b","_uuid":"c38bdd0e-2697-44aa-be31-af254b0aacdb","papermill":{"duration":0.019334,"end_time":"2023-05-24T21:59:24.43638","exception":false,"start_time":"2023-05-24T21:59:24.417046","status":"completed"},"tags":[]},"source":["### Errors and Inconsistencies in the Data \n","- Station Name and id columns have a lot of null values which accounts for almost 15% of total data\n","- Trip end lattitude and longitude data is also missing in 5953 roows which is very negligible as it accounts for 0.1% of total data\n","- Lattitude and longitude data is unnecessary and will be removed from dataset"]},{"cell_type":"markdown","id":"3e9f2efc","metadata":{"_cell_guid":"ae4ed6e7-b32e-4fa2-abd9-035b0d916eaf","_uuid":"aef69335-81f4-4847-a497-4ac006972693","papermill":{"duration":0.019129,"end_time":"2023-05-24T21:59:24.47536","exception":false,"start_time":"2023-05-24T21:59:24.456231","status":"completed"},"tags":[]},"source":["## Cleaning up the dataset"]},{"cell_type":"code","execution_count":11,"id":"eb833885","metadata":{"_cell_guid":"7289437a-171e-446d-b953-56e7f658e905","_uuid":"4b25ba15-9df3-4da1-983f-b0c65133cf0c","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:24.517255Z","iopub.status.busy":"2023-05-24T21:59:24.51567Z","iopub.status.idle":"2023-05-24T21:59:24.569495Z","shell.execute_reply":"2023-05-24T21:59:24.567166Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.077498,"end_time":"2023-05-24T21:59:24.572061","exception":false,"start_time":"2023-05-24T21:59:24.494563","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["spc_tbl_ [5,859,061 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n"," $ ride_id           : chr [1:5859061] \"EC2DE40644C6B0F4\" \"1C31AD03897EE385\" \"1542FBEC830415CF\" \"6FF59852924528F8\" ...\n"," $ rideable_type     : chr [1:5859061] \"classic_bike\" \"classic_bike\" \"classic_bike\" \"classic_bike\" ...\n"," $ started_at        : POSIXct[1:5859061], format: \"2022-05-23 23:06:58\" \"2022-05-11 08:53:28\" ...\n"," $ ended_at          : POSIXct[1:5859061], format: \"2022-05-23 23:40:19\" \"2022-05-11 09:31:22\" ...\n"," $ start_station_name: chr [1:5859061] \"Wabash Ave & Grand Ave\" \"DuSable Lake Shore Dr & Monroe St\" \"Clinton St & Madison St\" \"Clinton St & Madison St\" ...\n"," $ start_station_id  : chr [1:5859061] \"TA1307000117\" \"13300\" \"TA1305000032\" \"TA1305000032\" ...\n"," $ end_station_name  : chr [1:5859061] \"Halsted St & Roscoe St\" \"Field Blvd & South Water St\" \"Wood St & Milwaukee Ave\" \"Clark St & Randolph St\" ...\n"," $ end_station_id    : chr [1:5859061] \"TA1309000025\" \"15534\" \"13221\" \"TA1305000030\" ...\n"," $ start_lat         : num [1:5859061] 41.9 41.9 41.9 41.9 41.9 ...\n"," $ start_lng         : num [1:5859061] -87.6 -87.6 -87.6 -87.6 -87.6 ...\n"," $ end_lat           : num [1:5859061] 41.9 41.9 41.9 41.9 41.9 ...\n"," $ end_lng           : num [1:5859061] -87.6 -87.6 -87.7 -87.6 -87.7 ...\n"," $ member_casual     : chr [1:5859061] \"member\" \"member\" \"member\" \"member\" ...\n"," - attr(*, \"spec\")=\n","  .. cols(\n","  ..   ride_id = \u001b[31mcol_character()\u001b[39m,\n","  ..   rideable_type = \u001b[31mcol_character()\u001b[39m,\n","  ..   started_at = \u001b[34mcol_datetime(format = \"\")\u001b[39m,\n","  ..   ended_at = \u001b[34mcol_datetime(format = \"\")\u001b[39m,\n","  ..   start_station_name = \u001b[31mcol_character()\u001b[39m,\n","  ..   start_station_id = \u001b[31mcol_character()\u001b[39m,\n","  ..   end_station_name = \u001b[31mcol_character()\u001b[39m,\n","  ..   end_station_id = \u001b[31mcol_character()\u001b[39m,\n","  ..   start_lat = \u001b[32mcol_double()\u001b[39m,\n","  ..   start_lng = \u001b[32mcol_double()\u001b[39m,\n","  ..   end_lat = \u001b[32mcol_double()\u001b[39m,\n","  ..   end_lng = \u001b[32mcol_double()\u001b[39m,\n","  ..   member_casual = \u001b[31mcol_character()\u001b[39m\n","  .. )\n"," - attr(*, \"problems\")=<externalptr> \n"]}],"source":["#Checking the structure of dataset\n","str(all_trips_last_year)"]},{"cell_type":"markdown","id":"8209e35c","metadata":{"_cell_guid":"7be90324-16ad-417f-be61-776f18913aeb","_uuid":"5bd381ae-b67c-4b1d-ae3c-bce7e173b6ac","papermill":{"duration":0.019577,"end_time":"2023-05-24T21:59:24.610811","exception":false,"start_time":"2023-05-24T21:59:24.591234","status":"completed"},"tags":[]},"source":["### Data clean up plan:\n","- New columns will be added foe better analysis\n","    - Extracting date column from started_at\n","    - Extracting day, month and year from the date column\n","    - Adding Day of the week name to identify weekdays vs weekend trend\n","- Checking the range of data and find out if they are not within the selcted 12 month range\n","- Calculate ride_length to identify trends in how long riders use the bikes"]},{"cell_type":"code","execution_count":12,"id":"18902921","metadata":{"_cell_guid":"ca71c459-ba3b-4c60-bab7-4744ec853ba1","_uuid":"f7f12164-d85d-43c1-9dce-4e9aacfd2828","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:24.653092Z","iopub.status.busy":"2023-05-24T21:59:24.651436Z","iopub.status.idle":"2023-05-24T21:59:43.236767Z","shell.execute_reply":"2023-05-24T21:59:43.23478Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":18.609905,"end_time":"2023-05-24T21:59:43.240031","exception":false,"start_time":"2023-05-24T21:59:24.630126","status":"completed"},"tags":[]},"outputs":[],"source":["#Adding new columns\n","all_trips_last_year$date <- as.Date(all_trips_last_year$started_at)\n","all_trips_last_year$month <- format(as.Date(all_trips_last_year$date), \"%m\")\n","all_trips_last_year$monthName <- month(as.Date(all_trips_last_year$date), label = TRUE, abbr = FALSE)\n","all_trips_last_year$day <- format(as.Date(all_trips_last_year$date), \"%d\")\n","all_trips_last_year$year <- format(as.Date(all_trips_last_year$date), \"%Y\")\n","all_trips_last_year$day_of_week <- format(as.Date(all_trips_last_year$date), \"%A\")"]},{"cell_type":"code","execution_count":13,"id":"0def2423","metadata":{"_cell_guid":"a8c4a2c3-cc12-43d4-b9cc-32d2045b65b1","_uuid":"302f5071-db86-4508-9792-51aee19b85ec","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:43.283535Z","iopub.status.busy":"2023-05-24T21:59:43.281843Z","iopub.status.idle":"2023-05-24T21:59:43.484339Z","shell.execute_reply":"2023-05-24T21:59:43.482182Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.228077,"end_time":"2023-05-24T21:59:43.486927","exception":false,"start_time":"2023-05-24T21:59:43.25885","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Earliest Trip Start:  2022-05-01 00:00:06\n","Latest Trip Start: : 2023-04-30 23:59:05\n","\n","Earliest Trip End:  2022-05-01 00:05:17\n","Latest Trip End:  2023-05-03 10:37:12"]}],"source":["# Check if the trip times are within the range\n","cat(\"Earliest Trip Start: \", as.character(min(all_trips_last_year$started_at)))\n","cat(\"\\nLatest Trip Start: :\",as.character(max(all_trips_last_year$started_at)))\n","cat(\"\\n\\nEarliest Trip End: \",as.character(min(all_trips_last_year$ended_at)))\n","cat(\"\\nLatest Trip End: \",as.character(max(all_trips_last_year$ended_at)))"]},{"cell_type":"code","execution_count":14,"id":"7ceb803a","metadata":{"_cell_guid":"6501e2d0-2480-4e44-808c-c30f733570cf","_uuid":"a51fcc40-1e02-4736-974c-7c2b7dc5be2c","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:43.530114Z","iopub.status.busy":"2023-05-24T21:59:43.52842Z","iopub.status.idle":"2023-05-24T21:59:52.92268Z","shell.execute_reply":"2023-05-24T21:59:52.920785Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":9.418749,"end_time":"2023-05-24T21:59:52.925639","exception":false,"start_time":"2023-05-24T21:59:43.50689","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["TRUE"],"text/latex":["TRUE"],"text/markdown":["TRUE"],"text/plain":["[1] TRUE"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["[1] -621201\n","[1] 2483235\n"]}],"source":["# Add a \"ride_length\" calculation to all_trips (in seconds)\n","all_trips_last_year$ride_length <- difftime(all_trips_last_year$ended_at,all_trips_last_year$started_at)\n","\n","# Convert \"ride_length\" to numeric so we can run calculations on the data\n","all_trips_last_year$ride_length <- as.numeric(as.character(all_trips_last_year$ride_length))\n","is.numeric(all_trips_last_year$ride_length)\n","\n","#Checking the range of ride_length\n","print(min(all_trips_last_year$ride_length))\n","print(max(all_trips_last_year$ride_length))"]},{"cell_type":"code","execution_count":15,"id":"acb87eb8","metadata":{"_cell_guid":"8035775e-5b71-446b-96fa-f8a6c0fdcd35","_uuid":"b00494ab-82f0-49c0-8f93-6c5e1421cf72","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:52.96905Z","iopub.status.busy":"2023-05-24T21:59:52.967502Z","iopub.status.idle":"2023-05-24T21:59:53.002892Z","shell.execute_reply":"2023-05-24T21:59:53.001148Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.059597,"end_time":"2023-05-24T21:59:53.005307","exception":false,"start_time":"2023-05-24T21:59:52.94571","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Count of Negative values:  103"]}],"source":["cat(\"Count of Negative values: \", sum(all_trips_last_year$ride_length < 0))"]},{"cell_type":"markdown","id":"73f2fd52","metadata":{"_cell_guid":"2c0a926c-0f86-476f-bebf-08e0a05cf68b","_uuid":"ef36b335-6465-4097-af0c-ab2b2e41cf45","papermill":{"duration":0.01947,"end_time":"2023-05-24T21:59:53.044517","exception":false,"start_time":"2023-05-24T21:59:53.025047","status":"completed"},"tags":[]},"source":["- It is found that ride_length values are negative, which should be zero or more\n","- Only 103 entires are found negative, which is very negligible"]},{"cell_type":"code","execution_count":16,"id":"15fda17c","metadata":{"_cell_guid":"f3b9e3cd-8a38-4074-b3f4-957da2c23d94","_uuid":"1b4212af-7dd4-40e3-bb95-64150d8314b5","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:53.087396Z","iopub.status.busy":"2023-05-24T21:59:53.085841Z","iopub.status.idle":"2023-05-24T21:59:54.557553Z","shell.execute_reply":"2023-05-24T21:59:54.555485Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":1.496195,"end_time":"2023-05-24T21:59:54.560341","exception":false,"start_time":"2023-05-24T21:59:53.064146","status":"completed"},"tags":[]},"outputs":[],"source":["# Columns with \"HQ QR\" values in start_station_name is for QA purposes which needs to be removed along wiht negative ride_length values\n","# Creating a new version of the dataframe (v2) since data is being removed\n","all_trips_last_year_v2 <- all_trips_last_year[!(all_trips_last_year$start_station_name == \"HQ QR\" | all_trips_last_year$ride_length < 0), ]"]},{"cell_type":"code","execution_count":17,"id":"7abd1dc1","metadata":{"_cell_guid":"c0ab7b67-3c0e-4947-93bb-42f80d21d081","_uuid":"d48b5f3f-4294-493f-a6a8-df3839a52b1c","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:54.609099Z","iopub.status.busy":"2023-05-24T21:59:54.606394Z","iopub.status.idle":"2023-05-24T21:59:59.033704Z","shell.execute_reply":"2023-05-24T21:59:59.031433Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":4.452886,"end_time":"2023-05-24T21:59:59.036406","exception":false,"start_time":"2023-05-24T21:59:54.58352","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["[1] 831984\n"]}],"source":["# Count rows where every column has missing values\n","print(sum(rowSums(is.na(all_trips_last_year_v2)) == ncol(all_trips_last_year_v2)))"]},{"cell_type":"code","execution_count":18,"id":"86299fdf","metadata":{"_cell_guid":"dfa0e078-20f4-4316-9d91-52834ea7fac8","_uuid":"75964988-0e18-4992-a8ad-d0cf496c6c2b","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T21:59:59.079957Z","iopub.status.busy":"2023-05-24T21:59:59.078305Z","iopub.status.idle":"2023-05-24T22:00:06.258149Z","shell.execute_reply":"2023-05-24T22:00:06.256174Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":7.20471,"end_time":"2023-05-24T22:00:06.260957","exception":false,"start_time":"2023-05-24T21:59:59.056247","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["[1] 0\n"]}],"source":["# Remove rows with missing values in every column\n","all_trips_last_year_v2 <- all_trips_last_year_v2[!rowSums(is.na(all_trips_last_year_v2)) == ncol(all_trips_last_year_v2), ]\n","\n","# Count rows where every column has missing values\n","print(sum(rowSums(is.na(all_trips_last_year_v2)) == ncol(all_trips_last_year_v2)))"]},{"cell_type":"markdown","id":"e7e86360","metadata":{"_cell_guid":"3ce36808-986a-45e6-bbaa-2956aff78bf5","_uuid":"1df001ca-ecc5-4c60-95dd-16e596a722f9","papermill":{"duration":0.02451,"end_time":"2023-05-24T22:00:06.361967","exception":false,"start_time":"2023-05-24T22:00:06.337457","status":"completed"},"tags":[]},"source":["## Data Analysis Stage:\n","- ride_length attribute will be a main focus for this analysis\n","- We will aggregate the data to find out mean, max and min of ride_length by member type (Casual or Member)\n","- We will identify how many times bike services are used by month or by day of the week\n","- We will also identify the nature of the ride_length based on month, day of the week and membership type"]},{"cell_type":"code","execution_count":19,"id":"63b09650","metadata":{"_cell_guid":"64c7513b-cfe1-410b-934d-c77066c18959","_uuid":"e2461c96-7796-4c94-8fc8-c02c7c136bc2","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T22:00:06.40596Z","iopub.status.busy":"2023-05-24T22:00:06.404329Z","iopub.status.idle":"2023-05-24T22:00:06.715971Z","shell.execute_reply":"2023-05-24T22:00:06.714111Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.336833,"end_time":"2023-05-24T22:00:06.718737","exception":false,"start_time":"2023-05-24T22:00:06.381904","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n","      0     347     611    1196    1099 2483235 "]},"metadata":{},"output_type":"display_data"}],"source":["#Summarizing data for ride_length columnm\n","summary(all_trips_last_year_v2$ride_length)"]},{"cell_type":"code","execution_count":20,"id":"ca0fa79c","metadata":{"_cell_guid":"0a029ad3-c94d-4f61-ae24-418460bb7c74","_uuid":"02d822f5-18c1-47fb-91a8-a683bb79188f","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T22:00:06.764951Z","iopub.status.busy":"2023-05-24T22:00:06.763233Z","iopub.status.idle":"2023-05-24T22:00:07.00218Z","shell.execute_reply":"2023-05-24T22:00:07.00034Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.264974,"end_time":"2023-05-24T22:00:07.004893","exception":false,"start_time":"2023-05-24T22:00:06.739919","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 2 × 4</caption>\n","<thead>\n","\t<tr><th scope=col>member_casual</th><th scope=col>number_of_rides</th><th scope=col>average_duration</th><th scope=col>total_duration</th></tr>\n","\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>member</td><td>3015036</td><td> 754.673</td><td>2275366275</td></tr>\n","\t<tr><td>casual</td><td>2011938</td><td>1858.056</td><td>3738293609</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 2 × 4\n","\\begin{tabular}{llll}\n"," member\\_casual & number\\_of\\_rides & average\\_duration & total\\_duration\\\\\n"," <chr> & <int> & <dbl> & <dbl>\\\\\n","\\hline\n","\t member & 3015036 &  754.673 & 2275366275\\\\\n","\t casual & 2011938 & 1858.056 & 3738293609\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 2 × 4\n","\n","| member_casual &lt;chr&gt; | number_of_rides &lt;int&gt; | average_duration &lt;dbl&gt; | total_duration &lt;dbl&gt; |\n","|---|---|---|---|\n","| member | 3015036 |  754.673 | 2275366275 |\n","| casual | 2011938 | 1858.056 | 3738293609 |\n","\n"],"text/plain":["  member_casual number_of_rides average_duration total_duration\n","1 member        3015036          754.673         2275366275    \n","2 casual        2011938         1858.056         3738293609    "]},"metadata":{},"output_type":"display_data"}],"source":["# Compare members vs casual users for mean ride_length\n","\n","# analyze ridership data by type and weekday\n","all_trips_last_year_v2 %>% \n","  group_by(member_casual) %>%  #groups by usertype and weekday\n","  summarise(number_of_rides = n()\t\t\t\t\t\t\t#calculates the number of rides and average duration \n","            ,average_duration = mean(ride_length), total_duration = sum(ride_length)) %>% \t\t# calculates the average duration\n","  arrange(average_duration)"]},{"cell_type":"code","execution_count":21,"id":"b15ff7e4","metadata":{"_cell_guid":"be5c6078-3e04-4b22-b984-34238c20a3b4","_uuid":"d132360c-f0bd-4a2d-af0e-8f5a48b683b1","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T22:00:07.050612Z","iopub.status.busy":"2023-05-24T22:00:07.048572Z","iopub.status.idle":"2023-05-24T22:00:10.828113Z","shell.execute_reply":"2023-05-24T22:00:10.826119Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":3.806293,"end_time":"2023-05-24T22:00:10.831723","exception":false,"start_time":"2023-05-24T22:00:07.02543","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["  Member Type Max Ride Length\n","1      casual         2483235\n","2      member           93580\n"]}],"source":["# Compare members vs casual users for max ride_length\n","\n","print(setNames(aggregate(all_trips_last_year_v2$ride_length ~ all_trips_last_year_v2$member_casual, FUN = max), \n","               c(\"Member Type\", \"Max Ride Length\")))"]},{"cell_type":"code","execution_count":22,"id":"96a01cc0","metadata":{"_cell_guid":"9c8e6d8b-9e5b-4695-83f5-14af854d871a","_uuid":"e699987c-df56-43c1-b937-fd5f1c349afc","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T22:00:10.876824Z","iopub.status.busy":"2023-05-24T22:00:10.875073Z","iopub.status.idle":"2023-05-24T22:00:13.197757Z","shell.execute_reply":"2023-05-24T22:00:13.195621Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":2.348467,"end_time":"2023-05-24T22:00:13.200766","exception":false,"start_time":"2023-05-24T22:00:10.852299","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["  Member Type Min Ride Length\n","1      casual               0\n","2      member               0\n"]}],"source":["# Compare members vs casual users for min ride_length\n","\n","print(setNames(aggregate(all_trips_last_year_v2$ride_length ~ all_trips_last_year_v2$member_casual, FUN = min), \n","               c(\"Member Type\", \"Min Ride Length\")))"]},{"cell_type":"code","execution_count":23,"id":"ccc8c164","metadata":{"_cell_guid":"04251cc0-5cea-42b9-adac-56992cb7093e","_uuid":"fa919ada-18b0-4004-98c6-ad02077ab95d","collapsed":false,"execution":{"iopub.execute_input":"2023-05-24T22:00:13.248401Z","iopub.status.busy":"2023-05-24T22:00:13.246749Z","iopub.status.idle":"2023-05-24T22:00:21.202464Z","shell.execute_reply":"2023-05-24T22:00:21.200425Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":7.982666,"end_time":"2023-05-24T22:00:21.205282","exception":false,"start_time":"2023-05-24T22:00:13.222616","status":"completed"},"tags":[]},"outputs":[],"source":["# Create the plot\n","plot1 <- ggplot(all_trips_last_year_v2, aes(x = monthName, y = ride_length, fill = member_casual)) +\n","  geom_bar(stat = \"summary\", fun = \"mean\", position = \"dodge\") +\n","  labs(title = \"Average Ride Length by Month\",\n","       x = \"\",\n","       y = \"Average Ride Duration (Seconds)\",\n","       fill = \"Member Type\") +\n","  theme_minimal()\n","\n","# Save the plot as a JPEG image with custom size\n","ggsave(\"/kaggle/working/p01.jpg\", plot1, width = 12.5, height = 6.67, units = \"in\", dpi = 300)"]},{"cell_type":"code","execution_count":24,"id":"ae587d2b","metadata":{"execution":{"iopub.execute_input":"2023-05-24T22:00:21.250988Z","iopub.status.busy":"2023-05-24T22:00:21.249292Z","iopub.status.idle":"2023-05-24T22:00:21.890031Z","shell.execute_reply":"2023-05-24T22:00:21.888025Z"},"papermill":{"duration":0.666788,"end_time":"2023-05-24T22:00:21.892955","exception":false,"start_time":"2023-05-24T22:00:21.226167","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\u001b[1m\u001b[22m`summarise()` has grouped output by 'member_casual'. You can override using the\n","`.groups` argument.\n"]}],"source":["# Let's visualize the number of rides by rider type\n","plot2 <- all_trips_last_year_v2 %>%\n","  group_by(member_casual, monthName) %>%\n","  summarise(number_of_rides = n() / 1000, average_duration = mean(ride_length)) %>%\n","  arrange(member_casual, monthName) %>%\n","  ggplot(aes(x = monthName, y = number_of_rides, fill = member_casual)) +\n","  geom_bar(stat = \"summary\", fun = \"sum\", position = \"dodge\") +\n","  labs(title = \"Rides by Month\",\n","       x = \"\",\n","       y = \"Rides No.\",\n","       fill = \"Member Type\") +\n","  theme_minimal()\n","\n","# Save the plot to a file\n","ggsave(\"/kaggle/working/plot2.jpg\", plot2, width = 12.5, height = 6.67, units = \"in\", dpi = 300)\n"]},{"cell_type":"markdown","id":"4febfcbe","metadata":{"_cell_guid":"88e9191d-f470-481f-bcde-e040f1e70682","_uuid":"4340cb8f-4e76-4517-9e41-d3df5626d529","papermill":{"duration":0.021207,"end_time":"2023-05-24T22:00:21.93534","exception":false,"start_time":"2023-05-24T22:00:21.914133","status":"completed"},"tags":[]},"source":["![Image Title](plot01.jpg)"]},{"cell_type":"code","execution_count":25,"id":"5b6b803f","metadata":{"execution":{"iopub.execute_input":"2023-05-24T22:00:21.981766Z","iopub.status.busy":"2023-05-24T22:00:21.979915Z","iopub.status.idle":"2023-05-24T22:00:27.786052Z","shell.execute_reply":"2023-05-24T22:00:27.784053Z"},"papermill":{"duration":5.833314,"end_time":"2023-05-24T22:00:27.789859","exception":false,"start_time":"2023-05-24T22:00:21.956545","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\u001b[1m\u001b[22m`summarise()` has grouped output by 'member_casual'. You can override using the\n","`.groups` argument.\n"]}],"source":["# Let's create a visualization for average duration\n","plot3 <- all_trips_last_year_v2 %>% \n","  mutate(weekday = wday(started_at, label = TRUE)) %>% \n","  group_by(member_casual, weekday) %>% \n","  summarise(number_of_rides = n(), average_duration = mean(ride_length)) %>% \n","  arrange(member_casual, weekday)  %>% \n","  ggplot(aes(x = weekday, y = average_duration, fill = member_casual)) +\n","  geom_bar(stat = \"summary\", fun = \"mean\", position = \"dodge\") +\n","  labs(title = \"Average Ride Duration per Day\",\n","       x = \"\",\n","       y = \"Average Ride Duration (Seconds)\",\n","       fill = \"Member Type\") +\n","  theme_minimal()  \n","\n","\n","# Save the plot to a file\n","ggsave(\"/kaggle/working/plot3.jpg\", plot3, width = 12.5, height = 6.67, units = \"in\", dpi = 300)"]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":318.964416,"end_time":"2023-05-24T22:00:28.342888","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2023-05-24T21:55:09.378472","version":"2.4.0"}},"nbformat":4,"nbformat_minor":5}